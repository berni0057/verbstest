<!-- made by AI -->
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Verbo Ingl√©s</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet" />
<link rel="icon" type="image/x-icon" href="favicon.png" />
<style>
  body {
    font-family: 'Montserrat', sans-serif;
    background-color: #f5f7fa;
    margin: 40px;
    text-align: center;
    color: #333;
  }
  h1 {
    text-align: center;
    font-weight: 600;
    font-size: 2.5rem;
    margin-bottom: 20px;
  }
  #exerciseContainer {
    display: none;
    margin-top: 20px;
    text-align: left;
    max-width: 450px;
    margin-left: auto;
    margin-right: auto;
    background: white;
    padding: 40px 70px 40px 40px;
    border-radius: 12px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    min-height: 200px;
  }
  #errorMessage {
    color: #dc3545;
    font-weight: 600;
    font-size: 1.5rem;
    display: none;
    margin-bottom: 20px;
  }
  #retryBtn {
    display: none;
    margin-top: 10px;
  }
  .form-group {
    margin-bottom: 30px;
  }
  label {
    display: block;
    font-weight: 600;
    margin-bottom: 6px;
    color: #222;
  }
  input[type="text"] {
    width: 100%;
    padding: 10px 14px;
    font-size: 16px;
    border: 2px solid #ddd;
    border-radius: 8px;
    transition: border-color 0.3s ease;
  }
  input[type="text"]:focus {
    outline: none;
    border-color: #5b9bd5;
    box-shadow: 0 0 6px #99bbff;
  }
  input.correct {
    background-color: #d4edda;
    border-color: #28a745;
    color: #155724;
    font-weight: 600;
  }
  input.incorrect {
    background-color: #f8d7da;
    border-color: #dc3545;
    color: #721c24;
    font-weight: 600;
  }
  #message {
    font-size: 1.5rem;
    margin-top: 25px;
    font-weight: 600;
  }
  #message.green {
    color: #28a745;
  }
  #message.red {
    color: #dc3545;
  }
  button {
    margin-top: 20px;
    background-color: #5b9bd5;
    color: white;
    border: none;
    border-radius: 12px;
    padding: 12px 30px;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 5px 10px rgba(91,155,213,0.3);
    transition: background-color 0.25s ease, transform 0.15s ease;
  }
  button:disabled {
    background-color: #a4b8d5;
    cursor: not-allowed;
    box-shadow: none;
  }
  button:hover:not(:disabled) {
    background-color: #4178d1;
    transform: translateY(-2px);
  }
  button:active:not(:disabled) {
    transform: translateY(1px);
  }
</style>
</head>
<body>

<h1 id="pageTitle">IRREGULAR VERBS PART 1</h1>
<button id="startBtn">Start</button>

<div id="exerciseContainer" aria-live="polite">
  <div id="errorMessage">Error loading verbs list</div>
  <button id="retryBtn">Retry</button>
  <div id="exerciseContent">
    <div class="form-group">
      <label for="infinitive">INFINITIVE</label>
      <input type="text" id="infinitive" aria-describedby="infinitiveLabel" autocomplete="off"/>
    </div>

    <div class="form-group">
      <label for="pastSimple">PAST SIMPLE</label>
      <input type="text" id="pastSimple" aria-describedby="pastSimpleLabel" autocomplete="off"/>
    </div>

    <div class="form-group">
      <label for="pastParticiple">PAST PARTICIPLE</label>
      <input type="text" id="pastParticiple" aria-describedby="pastParticipleLabel" autocomplete="off"/>
    </div>

    <button id="checkBtn">Check</button>
    <button id="nextBtn">Next</button>
    <div id="message" role="alert"></div>
  </div>
</div>

<script>
let verbs = [];
let currentVerb = null;
let lockedForm = "";

async function loadVerbs() {
  try {
    const response = await fetch('verbs.json');
    if (!response.ok) throw new Error('HTTP error ' + response.status);
    verbs = await response.json();
    return true;
  } catch (error) {
    console.error('Error al cargar verbs.json:', error);
    return false;
  }
}

function getRandomVerb() {
  const index = Math.floor(Math.random() * verbs.length);
  return verbs[index];
}

function pickForm(verb) {
  const forms = ["infinitive", "pastSimple", "pastParticiple"];
  let form = forms[Math.floor(Math.random() * forms.length)];
  if (verb.infinitive === "can" && form === "pastParticiple") {
    const altForms = forms.filter(f => f !== "pastParticiple");
    form = altForms[Math.floor(Math.random() * altForms.length)];
  }
  if (form === "pastParticiple" && verb.pastParticiple === null) {
    const altForms = forms.filter(f => f !== "pastParticiple");
    form = altForms[Math.floor(Math.random() * altForms.length)];
  }
  return form;
}

function loadVerb() {
  document.getElementById("message").textContent = "";
  ['infinitive', 'pastSimple', 'pastParticiple'].forEach(id => {
    const input = document.getElementById(id);
    input.value = "";
    input.disabled = false;
    input.className = "";
  });
  document.getElementById("nextBtn").style.display = "none";
  document.getElementById("checkBtn").disabled = false;

  currentVerb = getRandomVerb();
  const form = pickForm(currentVerb);

  if (form === "infinitive") {
    const input = document.getElementById("infinitive");
    input.value = currentVerb.infinitive;
    input.disabled = true;
  } else if (form === "pastSimple") {
    const input = document.getElementById("pastSimple");
    input.value = Array.isArray(currentVerb.pastSimple) ? currentVerb.pastSimple[0] : currentVerb.pastSimple;
    input.disabled = true;
  } else if (form === "pastParticiple") {
    const input = document.getElementById("pastParticiple");
    input.value = Array.isArray(currentVerb.pastParticiple) ? currentVerb.pastParticiple[0] : currentVerb.pastParticiple;
    input.disabled = true;
  }

  lockedForm = form;
}

function isAnswerCorrect(userAnswer, validAnswers) {
  if (!userAnswer) return false;
  userAnswer = userAnswer.toLowerCase().trim();
  const userParts = userAnswer.split("/").map(s => s.trim()).filter(s => s.length > 0);
  const validParts = Array.isArray(validAnswers) ? validAnswers.map(s => s.toLowerCase().trim()) : [validAnswers.toLowerCase().trim()];
  if (userParts.length === 1) {
    return validParts.includes(userParts[0]);
  }
  for (const p of userParts) {
    if (!validParts.includes(p)) return false;
  }
  return true;
}

document.getElementById("checkBtn").addEventListener("click", () => {
  let correctCount = 0;
  const totalFields = 3;

  const userInf = document.getElementById("infinitive").value.trim();
  const userPastS = document.getElementById("pastSimple").value.trim();
  const userPastP = document.getElementById("pastParticiple").value.trim();

  if (lockedForm !== "infinitive") {
    const input = document.getElementById("infinitive");
    if (isAnswerCorrect(userInf, currentVerb.infinitive)) {
      input.className = "correct";
      input.disabled = true;
      correctCount++;
    } else {
      input.className = "incorrect";
      input.disabled = false;
    }
  } else {
    const input = document.getElementById("infinitive");
    input.className = "correct";
    correctCount++;
  }

  const validPastS = Array.isArray(currentVerb.pastSimple) ? currentVerb.pastSimple : [currentVerb.pastSimple];
  if (lockedForm !== "pastSimple") {
    const input = document.getElementById("pastSimple");
    if (isAnswerCorrect(userPastS, validPastS)) {
      input.className = "correct";
      input.disabled = true;
      correctCount++;
    } else {
      input.className = "incorrect";
      input.disabled = false;
    }
  } else {
    const input = document.getElementById("pastSimple");
    input.className = "correct";
    correctCount++;
  }

  if (currentVerb.pastParticiple !== null && lockedForm !== "pastParticiple") {
    const validPastP = Array.isArray(currentVerb.pastParticiple) ? currentVerb.pastParticiple : [currentVerb.pastParticiple];
    const input = document.getElementById("pastParticiple");
    if (isAnswerCorrect(userPastP, validPastP)) {
      input.className = "correct";
      input.disabled = true;
      correctCount++;
    } else {
      input.className = "incorrect";
      input.disabled = false;
    }
  } else {
    const input = document.getElementById("pastParticiple");
    input.className = "correct";
    correctCount++;
  }

  const message = document.getElementById("message");
  if (correctCount === totalFields) {
    message.textContent = "Good job!";
    message.className = "green";
    document.getElementById("nextBtn").style.display = "inline";
    document.getElementById("checkBtn").disabled = true;
  } else {
    message.textContent = "Wrong answer";
    message.className = "red";
    document.getElementById("nextBtn").style.display = "none";
    document.getElementById("checkBtn").disabled = false;
  }
});

document.getElementById("nextBtn").addEventListener("click", () => {
  loadVerb();
});

document.getElementById("startBtn").addEventListener("click", async () => {
  const success = await loadVerbs();
  document.getElementById("startBtn").style.display = "none";
  document.getElementById("exerciseContainer").style.display = "block";
  if (!success) {
    document.getElementById("exerciseContent").style.display = "none";
    document.getElementById("errorMessage").style.display = "block";
    document.getElementById("retryBtn").style.display = "inline-block";
  } else {
    document.getElementById("errorMessage").style.display = "none";
    document.getElementById("retryBtn").style.display = "none";
    document.getElementById("exerciseContent").style.display = "block";
    loadVerb();
  }
});

document.getElementById("retryBtn").addEventListener("click", () => {
  window.location.reload();
});
</script>
<div id="attribution">
  <a href="https://www.flaticon.com/free-icons/england" title="england icons" target="_blank" rel="noopener noreferrer">
    England icons created by Freepik - Flaticon
  </a>
</div>

<style>
  #attribution {
    font-family: 'Montserrat', sans-serif;
    font-size: 10px;
    color: #555;
    position: fixed;
    bottom: 8px;
    right: 12px;
    max-width: 230px;
    text-align: right;
    z-index: 1000;
  }
  #attribution a {
    color: #555;
    text-decoration: none;
  }
  #attribution a:hover {
    text-decoration: underline;
  }
</style>

</body>
</html>


